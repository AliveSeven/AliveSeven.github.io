<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>AliveSeven&#39;s Blog</title>
  
  
  <link href="https://aliveseven.github.io/atom.xml" rel="self"/>
  
  <link href="https://aliveseven.github.io/"/>
  <updated>2022-08-30T02:18:56.787Z</updated>
  <id>https://aliveseven.github.io/</id>
  
  <author>
    <name>AliveSeven</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>VueåŸºç¡€</title>
    <link href="https://aliveseven.github.io/posts/4b668c47/"/>
    <id>https://aliveseven.github.io/posts/4b668c47/</id>
    <published>2022-08-29T15:14:40.551Z</published>
    <updated>2022-08-30T02:18:56.787Z</updated>
    
    <content type="html"><![CDATA[<h1 id="VueåŸºç¡€"><a href="#VueåŸºç¡€" class="headerlink" title="VueåŸºç¡€"></a>VueåŸºç¡€</h1><h2 id="el-æŒ‚è½½ç‚¹"><a href="#el-æŒ‚è½½ç‚¹" class="headerlink" title="el:æŒ‚è½½ç‚¹"></a>el:æŒ‚è½½ç‚¹</h2><p>å…ˆå¯¼å…¥Vue.jsåˆ°HTMLä¸­ï¼Œåœ¨åˆ›å»ºVueå®ä¾‹æ—¶ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ï¼Œé€‰é¡¹å¯¹è±¡çš„elå±æ€§æŒ‡å‘View</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;message&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">        &#123;&#123;message&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// #æ˜¯idé€‰æ‹©å™¨ï¼Œç‚¹.æ˜¯classçš„é€‰æ‹©å™¨</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// el: &quot;#app&quot;ï¼Œé€šè¿‡elæŒ‚è½½idä¸ºappçš„æ ‡ç­¾ï¼Œå¯¹é‡Œé¢çš„dataä½œå‡ºç¼–è¾‘ï¼Œå¯ä»¥è¿›è¡ŒåµŒå¥—ï¼Œå¦‚ä¸‹é¢çš„è®¾ç½®æ˜¯å¯¹dataä¸­çš„&#123;&#123;message&#125;&#125;ä½œå‡ºç¼–è¾‘è¾“å‡º&quot;Hello Vue!&quot;ï¼Œå‡¡æ˜¯æŒ‚è½½çš„æ ‡ç­¾é‡Œé¢çš„&#123;&#123;message&#125;&#125;éƒ½æœ‰è¿™ä¸ªæ•ˆæœï¼Œå°±æ˜¯å¯ä»¥åµŒå¥—</span></span></span><br><span class="line"><span class="language-javascript">        el : <span class="string">&quot;.app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            message : <span class="string">&quot;Hello Vue!&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Vueå®ä¾‹çš„ä½œç”¨èŒƒå›´ï¼Ÿ"><a href="#Vueå®ä¾‹çš„ä½œç”¨èŒƒå›´ï¼Ÿ" class="headerlink" title="Vueå®ä¾‹çš„ä½œç”¨èŒƒå›´ï¼Ÿ"></a>Vueå®ä¾‹çš„ä½œç”¨èŒƒå›´ï¼Ÿ</h3><ul><li>Vueä¼šç®¡ç†elé€‰é¡¹å‘½ä¸­çš„å…ƒç´ åŠå…¶å†…éƒ¨çš„åå°å…ƒç´ </li></ul><h3 id="æ˜¯å¦å¯ä»¥ä½¿ç”¨å…¶ä»–çš„é€‰æ‹©å™¨ï¼Ÿ"><a href="#æ˜¯å¦å¯ä»¥ä½¿ç”¨å…¶ä»–çš„é€‰æ‹©å™¨ï¼Ÿ" class="headerlink" title="æ˜¯å¦å¯ä»¥ä½¿ç”¨å…¶ä»–çš„é€‰æ‹©å™¨ï¼Ÿ"></a>æ˜¯å¦å¯ä»¥ä½¿ç”¨å…¶ä»–çš„é€‰æ‹©å™¨ï¼Ÿ</h3><ul><li>å¯ä»¥ä½¿ç”¨å…¶ä»–é€‰æ‹©å™¨ï¼Œå»ºè®®ç”¨id</li></ul><h3 id="æ˜¯å¦å¯ä»¥è®¾ç½®å…¶ä»–çš„domå…ƒç´ ï¼Ÿ"><a href="#æ˜¯å¦å¯ä»¥è®¾ç½®å…¶ä»–çš„domå…ƒç´ ï¼Ÿ" class="headerlink" title="æ˜¯å¦å¯ä»¥è®¾ç½®å…¶ä»–çš„domå…ƒç´ ï¼Ÿ"></a>æ˜¯å¦å¯ä»¥è®¾ç½®å…¶ä»–çš„domå…ƒç´ ï¼Ÿ</h3><ul><li>domæ˜¯æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œå‡å¦‚æœ‰ä¸€æ®µè¿™æ ·çš„ä»£ç ï¼š</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>æˆ‘çš„æ ‡é¢˜<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>æˆ‘çš„é“¾æ¥<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆ‘çš„æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå®ƒçš„domæ¨¡å‹æ ‘å°±æ˜¯é•¿è¿™æ ·çš„</p><p><img src="https://pica.zhimg.com/v2-69d53b19c03ddc8bd3bc047f328de929_r.jpg?source=1940ef5c" alt="preview"></p><p>å›åˆ°æ­£é¢˜ï¼Œä¸€èˆ¬Vueçš„elæŒ‚è½½ç‚¹ä¸èƒ½ä½¿ç”¨htmlå’Œbodyæ¥æŒ‚è½½ï¼Œå…¶ä»–åŒæ ‡ç­¾å¯ä»¥</p><h2 id="data-æ•°æ®å¯¹è±¡"><a href="#data-æ•°æ®å¯¹è±¡" class="headerlink" title="data:æ•°æ®å¯¹è±¡"></a>data:æ•°æ®å¯¹è±¡</h2><ul><li><p>Vueå¯ä»¥åƒJavaã€Pythonç­‰ç¼–ç¨‹è¯­è¨€é‚£æ ·ï¼Œç”¨xxx.xxxæ¥è¡¨ç¤ºè¦å±•ç¤ºçš„å¯¹è±¡</p><p>æ¯”å¦‚â†“</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;message&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">        &#123;&#123;school.name&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">        &#123;&#123;campus[0]&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        el : <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            message : <span class="string">&quot;Hello Vue!&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æ³¨æ„è¦åŠ é€—å·ï¼Œå­—ç¬¦ä¸²è¦åŠ åŒå¼•å·</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">school</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">                name : <span class="string">&quot;é€—ä¹å“¥&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                mobile : <span class="string">&quot;10086&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">campus</span>: [<span class="string">&quot;é¦™æ¸¯æ ¡åŒº&quot;</span>,<span class="string">&quot;æ·±åœ³æ ¡åŒº&quot;</span>]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åè¾“å‡ºç»“æœå¦‚ä¸‹â†“</p><p><img src="https://m1.im5i.com/2022/08/29/Uqgvfo.png" alt="Uqgvfo.png"></p><h2 id="v-text"><a href="#v-text" class="headerlink" title="v-text"></a>v-text</h2><ul><li><p>åœ¨æ ‡ç­¾å¦‚<code>&lt;div&gt;ï¼Œ&lt;h1&gt;</code>è¿™æ ·çš„æ ‡ç­¾é‡Œé¢æ’å…¥v-textï¼Œåªä¼šæ˜¾ç¤ºv-textæ‰€æŒ‡å‘çš„é‚£ä¸ªçš„å¯¹è±¡çš„å†…å®¹ï¼Œè€Œç”¨åŒæ‹¬å·å¯ä»¥åœ¨åé¢åŠ ä¸Šä¸œè¥¿</p><p>çœ‹ä»£ç å’Œè¾“å‡ºç»“æœâ†“</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-text</span> = <span class="string">&quot;message + &#x27;ï¼ï¼å“ˆå“ˆå“ˆå“ˆ&#x27;&quot;</span>&gt;</span>è¿™é‡Œè¾“å…¥ä»€ä¹ˆéƒ½ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-text</span> = <span class="string">&quot;message + &#x27;ï¼ï¼å“ˆå“ˆå“ˆå“ˆ&#x27;&quot;</span>&gt;</span>è¿˜æ˜¯æ²¡æœ‰æ˜¾ç¤º<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;message&#125;&#125;ï¼ï¼å‘µå‘µ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            message : <span class="string">&quot;çœŸåˆ«é€—æˆ‘ä¹&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            info : <span class="string">&quot;æˆ‘ç›´æ¥æ€çˆ†&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://m1.im5i.com/2022/08/29/Uqg14W.png" alt="Uqg14W.png"></p><h2 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a>v-html</h2><ul><li>å’Œv-textæ²¡æœ‰å¤šå¤§åŒºåˆ«ï¼ŒåŒºåˆ«åœ¨äºè¦æ˜¯ä¿®é¥°çš„æ ‡ç­¾æ˜¯è¶…é“¾æ¥ï¼Œæˆ–è€…æ˜¯æœ‰htmlç»“æ„çš„ï¼Œå¯ä»¥ç”¨è¿™ä¸ªï¼Œè¿™ä¸ªä¿®é¥°ä¹‹åè¡¨ç°å‡ºæ¥çš„å°±æ˜¯ä¸€ä¸ªè¶…é“¾æ¥ï¼Œè€Œä¸æ˜¯æ–‡æœ¬ï¼Œå¦‚æœä¿®é¥°çš„æ˜¯æ–‡æœ¬ï¼Œç”¨v-text</li></ul><h2 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h2><ul><li><p>v-onæŒ‡ä»¤çš„ä½œç”¨æ˜¯ï¼šä¸ºå…ƒç´ ç»‘å®šäº‹ä»¶</p></li><li><p>äº‹ä»¶åä¸éœ€è¦å†™no</p></li><li><p>æŒ‡ä»¤å¯ä»¥ç®€å†™ä¸º@</p></li><li><p>ç»‘å®šçš„æ–¹æ³•å®šä¹‰åœ¨methodså±æ€§ä¸­</p><p>å®ä¾‹ä»£ç ï¼šæŒ‰ä¸‹h1é‚£éƒ¨åˆ†çš„ä»£ç å¯ä»¥å¢åŠ â€â€å¥½å¥½åƒï¼â€å­—æ ·åˆ°dataçš„foodåé¢ï¼ŒæŒ‰ä¸‹ä¸Šé¢ä¸‰ä¸ªæŒ‰é’®ä¼šå¼¹å‡ºè­¦å‘Šâ€åšItâ€</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;v-onæŒ‡ä»¤&quot;</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doIt&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;v-onç®€å†™&quot;</span> @<span class="attr">click</span> = <span class="string">&quot;doIt&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åŒå‡»äº‹ä»¶&quot;</span> @<span class="attr">dbclikck</span> = <span class="string">&quot;doIt&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> @<span class="attr">click</span> = <span class="string">&quot;changeFood&quot;</span>&gt;</span>&#123;&#123;food&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123; </span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">food</span>:<span class="string">&quot;è¥¿å…°èŠ±ç‚’é¸¡è›‹&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//è®¾ç½®æ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æ–¹æ³•åæ˜¯doIt</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">doIt</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//å‘å‡ºè­¦å‘Šæç¤ºâ€œåšItâ€</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;åšIt&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">changeFood</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">food</span> += <span class="string">&quot;å¥½å¥½åƒï¼&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="keyup"><a href="#keyup" class="headerlink" title="keyup"></a>keyup</h3><ul><li>v-on:keyup.enter/@keyup.enter ï¼šæŒ‰ä¸‹å›è½¦è§¦å‘äº‹ä»¶</li><li>v-on:keyup.alt.enter/@keyup.alt.enter ï¼šæŒ‰ä¸‹alt+enteré”®è§¦å‘äº‹ä»¶</li></ul><h3 id="splice"><a href="#splice" class="headerlink" title="splice()"></a>splice()</h3><ul><li>Vue.jsä¸­çš„è¯¥æ–¹æ³•å®ç°äº†å¯¹æ•°ç»„çš„å¢åˆ æ”¹æ“ä½œ</li><li>ç»“æ„ï¼šsplice(index,len,[item])</li><li>index ï¼šæ•°ç»„å¼€å§‹çš„ä¸‹æ ‡</li><li>lenï¼šæ›¿æ¢/åˆ é™¤çš„é•¿åº¦</li><li>itemï¼šæ›¿æ¢çš„å€¼ï¼Œåˆ é™¤æ“ä½œçš„è¯itemä¸ºç©º</li></ul><h2 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h2><ul><li>æ ¹æ®è¡¨è¾¾å¼çš„çœŸå‡ï¼Œåˆ‡æ¢å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—ï¼Œv-show = trueçš„æ—¶å€™æ˜¾ç¤ºï¼Œfalseçš„æ—¶å€™éšè—ã€‚</li></ul><h2 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h2><ul><li><p>åœ¨htmlä»£ç ä¸­ï¼Œv-bindç»‘å®šçš„æ˜¯åŠ¨æ€çš„è¡¨è¾¾å¼ï¼Œè€Œéå›ºå®šçš„å­—ç¬¦ä¸²ï¼Œåœ¨v-bindåï¼Œå°±å¯ä»¥åŠ¨æ€è·å–æ•°æ®ã€‚</p><p>å¯ä»¥å°†v-bindç†è§£ä¸ºï¼š <strong>è¢«v-bindä¿®é¥°çš„éƒ½æ˜¯åŠ¨æ€è·å–çš„å€¼ã€‚ è€Œéè¢«v-bindä¿®é¥°çš„ï¼Œä»…ä»…æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</strong></p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å®Œæ•´è¯­æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç¼©å†™ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h2><ul><li><p>æ ¹æ®æ•°æ®ç”Ÿæˆåˆ—è¡¨ç»“æ„</p><p>ä½¿ç”¨æ•ˆæœä»£ç â†“</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in arr&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123;index&#125;&#125; é€—ä¹äº† &#123;&#123;item&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in vegetables&quot;</span> <span class="attr">v-bind:title</span> = <span class="string">&quot;item.name&quot;</span> &gt;</span></span><br><span class="line">            &#123;&#123;item.name&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123; </span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>, </span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">arr</span>: [<span class="string">&quot;åŒ—äº¬&quot;</span>,<span class="string">&quot;ä¸Šæµ·&quot;</span>,<span class="string">&quot;é¦™æ¸¯&quot;</span>,<span class="string">&quot;æ·±åœ³&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">vegetables</span>:[&#123;<span class="attr">name</span>:<span class="string">&quot;è¥¿å…°èŠ±ç‚’è›‹&quot;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123;<span class="attr">name</span>:<span class="string">&quot;è›‹ç‚’è¥¿å…°èŠ±&quot;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://m1.im5i.com/2022/08/29/Uqgu0x.png" alt="Uqgu0x.png"></p><h2 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h2><ul><li>è·å–å’Œè®¾ç½®è¡¨å•å…ƒç´ çš„å€¼ï¼ˆåŒå‘æ•°æ®ç»‘å®šï¼‰ï¼Œå…ƒç´ ä¸€æ–¹æ”¹å˜äº†ï¼Œå¦ä¸€ä¸ªåœ°æ–¹ä¹Ÿè·Ÿç€å˜äº†</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-text</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123; </span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>, </span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            message : <span class="string">&quot;æˆ‘æ˜¯å¼ æ°ï¼Œé€—ä¹äº†&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="v-lazy"><a href="#v-lazy" class="headerlink" title="v-lazy"></a>v-lazy</h2><ul><li>v-lazyï¼šæ‡’åŠ è½½</li><li>ä½¿ç”¨æ‡’åŠ è½½çš„ç›®çš„ï¼šå½“é¡µé¢éœ€è¦åŠ è½½å¤§é‡å›¾ç‰‡æ—¶ï¼ˆéœ€è¦å‘ä¸‹æ»šåŠ¨é¡µé¢ï¼‰ï¼Œä½¿ç”¨æ‡’åŠ è½½å¯ä»¥å®ç°åªä¼˜å…ˆåŠ è½½é¡µé¢å¯è§†åŒºåŸŸçš„å›¾ç‰‡ï¼Œä»è€Œä½¿å¾—é¡µé¢åŠ è½½æ›´ä¸ºæµç•…ã€‚</li><li>éœ€è¦å®‰è£…ï¼Œcnpm i vue-lazyload -S</li><li>ç›®æ ‡é¡µé¢ä½¿ç”¨ğŸ‘‡</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//ç›´æ¥å°† &#x27;:src&#x27; æ›¿æ¢ä¸º &#x27;v-lazy&#x27; å³å¯</span><br><span class="line">&lt;img v-lazy=&quot;img.src&quot; &gt;</span><br><span class="line">&lt;img :src=&quot;img.src&quot; &gt;</span><br></pre></td></tr></table></figure><h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ç½‘ç»œè¯·æ±‚åº“ï¼ŒAxios æ˜¯ä¸€ä¸ªåŸºäº<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;è·å–ç¬‘è¯&quot;</span> <span class="attr">class</span>=<span class="string">&quot;get&quot;</span> @<span class="attr">click</span> = <span class="string">&quot;getJoke&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-text</span>=<span class="string">&quot;joke&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">            joke : <span class="string">&quot;ç¬‘è¯&quot;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//è®¾ç½®æ–¹æ³•</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//æ–¹æ³•getJoke</span></span></span><br><span class="line"><span class="language-javascript">           <span class="attr">getJoke</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">//è°ƒç”¨axios.getæ–¹æ³•ï¼Œåé¢ç´§è·Ÿæ¥å£é“¾æ¥ï¼Œé“¾æ¥è¿”å›ç»“æœä¿å­˜åœ¨resé‡Œé¢ï¼Œé€šè¿‡console.logå°†resè¾“å‡ºåˆ°æ§åˆ¶å°ä¸Šé¢</span></span></span><br><span class="line"><span class="language-javascript">               axios.<span class="title function_">get</span>(<span class="string">&quot;https://autumnfish.cn/api/joke/list?num=1&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">               .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">//æ”¹å˜å‚æ•°jokeçš„å€¼</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">this</span>.<span class="property">joke</span> = res.<span class="property">data</span>.<span class="property">jokes</span>[<span class="number">0</span>]</span></span><br><span class="line"><span class="language-javascript">               &#125;)</span></span><br><span class="line"><span class="language-javascript">               .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">console</span>.<span class="title function_">error</span>(err); </span></span><br><span class="line"><span class="language-javascript">               &#125;)</span></span><br><span class="line"><span class="language-javascript">           &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        æ¥å£1:éšæœºç¬‘è¯</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        è¯·æ±‚åœ°å€:https://autumnfish.cn/api/joke/list</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        è¯·æ±‚æ–¹æ³•:get</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        è¯·æ±‚å‚æ•°:num(ç¬‘è¯æ¡æ•°,æ•°å­—)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">        å“åº”å†…å®¹:éšæœºç¬‘è¯</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">    */</span></span></span><br><span class="line"><span class="language-javascript">   <span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         æ¥å£2:ç”¨æˆ·æ³¨å†Œ</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         è¯·æ±‚åœ°å€:https://autumnfish.cn/api/user/reg</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         è¯·æ±‚æ–¹æ³•:post</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         è¯·æ±‚å‚æ•°:username(ç”¨æˆ·å,å­—ç¬¦ä¸²)</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">         å“åº”å†…å®¹:æ³¨å†ŒæˆåŠŸæˆ–å¤±è´¥</span></span></span><br><span class="line"><span class="comment"><span class="language-javascript">     */</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://m1.im5i.com/2022/08/29/Uqg3zQ.gif" alt="Uqg3zQ.gif"></p><h1 id="Vueè¿›é˜¶"><a href="#Vueè¿›é˜¶" class="headerlink" title="Vueè¿›é˜¶"></a>Vueè¿›é˜¶</h1><h2 id="ES6è¯­æ³•"><a href="#ES6è¯­æ³•" class="headerlink" title="ES6è¯­æ³•"></a>ES6è¯­æ³•</h2><h3 id="let"><a href="#let" class="headerlink" title="let"></a>let</h3><ul><li>å’Œvarå…³é”®å­—çš„ç”¨æ³•åŸºæœ¬ä¸€è‡´ï¼Œä½†æ˜¯è¦å…ˆå£°æ˜å˜é‡ï¼Œæ‰èƒ½ä½¿ç”¨</li></ul><h3 id="functionå¯ä»¥çœç•¥"><a href="#functionå¯ä»¥çœç•¥" class="headerlink" title="functionå¯ä»¥çœç•¥"></a>functionå¯ä»¥çœç•¥</h3><ul><li><p>functionå¯ä»¥çœç•¥ï¼Œæ›¿æ¢ä¸º =&gt;ï¼Œä¾‹å¦‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func1 = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¯ä»¥æ›¿æ¢ä¸ºâ†“</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">func1</span> = (<span class="params"></span>)=&gt; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>å‚æ•°åªæœ‰ä¸€ä¸ªçš„æ—¶å€™å¯ä»¥çœç•¥ï¼ˆï¼‰ï¼Œä¾‹å¦‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func2 = <span class="keyword">function</span>(<span class="params">p1</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¯ä»¥æ›¿æ¢ä¸ºâ†“</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">func2</span> = p1=&gt; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>å‚æ•°æœ‰ä¸¤ä¸ªçš„è¯ï¼Œä¸å¯ä»¥çœç•¥ï¼ˆï¼‰ï¼Œ{}ä¹Ÿä¸èƒ½çœç•¥ï¼Œä¾‹å¦‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func3 = <span class="title function_">functino</span>(<span class="params">p1,p2</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p1);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¯ä»¥æ›¿æ¢ä¸ºâ†“</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">func3</span> = (<span class="params">p1,p2</span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p1);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(p2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ²¡æœ‰å‚æ•°ï¼Œåªæœ‰ä¸€è¡Œï¼Œæœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Œå¦‚æœ çœç•¥äº†{}ï¼Œå¿…é¡»ä¹Ÿè¦çœç•¥returnï¼Œä¾‹å¦‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> func4 = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¯ä»¥æ›¿æ¢ä¸ºâ†“</span></span><br><span class="line"><span class="keyword">let</span> func4 ()=&gt; <span class="string">&#x27;Hello&#x27;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="Element-UI"><a href="#Element-UI" class="headerlink" title="Element-UI"></a>Element-UI</h2><h3 id="el-input-æ— æ³•è§¦å‘-keyup-enter-è§£å†³æ–¹æ³•"><a href="#el-input-æ— æ³•è§¦å‘-keyup-enter-è§£å†³æ–¹æ³•" class="headerlink" title="el-input æ— æ³•è§¦å‘@keyup.enter è§£å†³æ–¹æ³•"></a>el-input æ— æ³•è§¦å‘@keyup.enter è§£å†³æ–¹æ³•</h3><ul><li>@keyup.enteråé¢åŠ ä¸Š.<strong>native</strong></li><li>ps: åœ¨ Vue 2.0 ä¸­ï¼Œä¸ºè‡ªå®šä¹‰ç»„ä»¶ç»‘å®šåŸç”Ÿäº‹ä»¶å¿…é¡»ä½¿ç”¨ .native ä¿®é¥°ç¬¦ï¼Œåªæœ‰Button ç»„ä»¶å¯ä»¥ç›‘å¬ click äº‹ä»¶ã€‚</li><li>æ³¨æ„ï¼šv-modelæ•°æ®å±‚ä¸€å®šè¦åœ¨@keyup.enter äº‹ä»¶ä¹‹å‰ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;VueåŸºç¡€&quot;&gt;&lt;a href=&quot;#VueåŸºç¡€&quot; class=&quot;headerlink&quot; title=&quot;VueåŸºç¡€&quot;&gt;&lt;/a&gt;VueåŸºç¡€&lt;/h1&gt;&lt;h2 id=&quot;el-æŒ‚è½½ç‚¹&quot;&gt;&lt;a href=&quot;#el-æŒ‚è½½ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;e</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://aliveseven.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Vue" scheme="https://aliveseven.github.io/categories/%E5%89%8D%E7%AB%AF/Vue/"/>
    
    
    <category term="å‰ç«¯" scheme="https://aliveseven.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Vue" scheme="https://aliveseven.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>axiosè¯¦ç»†å°è£…</title>
    <link href="https://aliveseven.github.io/posts/7217ca4c/"/>
    <id>https://aliveseven.github.io/posts/7217ca4c/</id>
    <published>2022-08-29T13:18:52.383Z</published>
    <updated>2022-08-30T02:19:04.592Z</updated>
    
    <content type="html"><![CDATA[<h1 id="axios-è¯¦ç»†å°è£…"><a href="#axios-è¯¦ç»†å°è£…" class="headerlink" title="axios è¯¦ç»†å°è£…"></a>axios è¯¦ç»†å°è£…</h1><h2 id="ä¸€ã€axiosçš„å°è£…"><a href="#ä¸€ã€axiosçš„å°è£…" class="headerlink" title="ä¸€ã€axiosçš„å°è£…"></a>ä¸€ã€axiosçš„å°è£…</h2><p>åœ¨vueé¡¹ç›®ä¸­ï¼Œå’Œåå°äº¤äº’è·å–æ•°æ®è¿™å—ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„æ˜¯axiosåº“ï¼Œ<strong>å®ƒæ˜¯åŸºäºpromiseçš„httpåº“</strong>ï¼Œ<strong>å¯è¿è¡Œåœ¨æµè§ˆå™¨ç«¯å’Œnode.jsä¸­</strong>ã€‚ä»–æœ‰å¾ˆå¤šä¼˜ç§€çš„ç‰¹æ€§ï¼Œä¾‹å¦‚æ‹¦æˆªè¯·æ±‚å’Œå“åº”ã€å–æ¶ˆè¯·æ±‚ã€è½¬æ¢jsonã€å®¢æˆ·ç«¯é˜²å¾¡XSRFç­‰ã€‚æ‰€ä»¥æˆ‘ä»¬çš„å°¤å¤§å¤§ä¹Ÿæ˜¯æœæ–­æ”¾å¼ƒäº†å¯¹å…¶å®˜æ–¹åº“vue-resourceçš„ç»´æŠ¤ï¼Œç›´æ¥æ¨èæˆ‘ä»¬ä½¿ç”¨axiosåº“ã€‚å¦‚æœè¿˜å¯¹axiosä¸äº†è§£çš„ï¼Œå¯ä»¥ç§»æ­¥axiosæ–‡æ¡£ã€‚</p><ul><li>å®‰è£…</li></ul><p>â€‹    npm install axios;    // å®‰è£…axios</p><ul><li>å¼•å…¥</li></ul><p>â€‹    ä¸€èˆ¬æˆ‘ä¼šåœ¨é¡¹ç›®çš„srcç›®å½•ä¸­ï¼Œæ–°å»ºä¸€ä¸ªrequestæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨é‡Œé¢æ–°å»ºä¸€ä¸ªhttp.jså’Œä¸€ä¸ªapi.jsæ–‡ä»¶ã€‚http.jsæ–‡ä»¶ç”¨æ¥å°è£…æˆ‘ä»¬çš„axiosï¼Œapi.jsç”¨æ¥ç»Ÿä¸€ç®¡ç†æˆ‘ä»¬çš„æ¥å£ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨http.jsä¸­å¼•å…¥axios</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>; <span class="comment">// å¼•å…¥axios</span></span><br><span class="line"><span class="keyword">import</span> <span class="variable constant_">QS</span> <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span>; <span class="comment">// å¼•å…¥qsæ¨¡å—ï¼Œç”¨æ¥åºåˆ—åŒ–postç±»å‹çš„æ•°æ®ï¼Œåé¢ä¼šæåˆ°</span></span><br><span class="line"><span class="comment">// vantçš„toastæç¤ºæ¡†ç»„ä»¶ï¼Œå¤§å®¶å¯æ ¹æ®è‡ªå·±çš„uiç»„ä»¶æ›´æ”¹ã€‚</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Toast</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span>; </span><br></pre></td></tr></table></figure><ul><li>ç¯å¢ƒçš„åˆ‡æ¢</li></ul><p>â€‹        æˆ‘ä»¬çš„é¡¹ç›®ç¯å¢ƒå¯èƒ½æœ‰å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒã€‚æˆ‘ä»¬é€šè¿‡nodeçš„ç¯å¢ƒå˜é‡æ¥åŒ¹é…æˆ‘ä»¬çš„é»˜è®¤çš„æ¥å£urlå‰ç¼€ã€‚axios.defaults.baseURLå¯ä»¥è®¾ç½®axiosçš„é»˜è®¤è¯·æ±‚åœ°å€å°±ä¸å¤šè¯´äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¯å¢ƒçš„åˆ‡æ¢</span></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> == <span class="string">&#x27;development&#x27;</span>) &#123;    </span><br><span class="line">    axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;https://www.baidu.com&#x27;</span>;&#125; </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> == <span class="string">&#x27;debug&#x27;</span>) &#123;    </span><br><span class="line">    axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;https://www.ceshi.com&#x27;</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> == <span class="string">&#x27;production&#x27;</span>) &#123;    </span><br><span class="line">    axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;https://www.production.com&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®è¯·æ±‚è¶…æ—¶</li></ul><p>â€‹        é€šè¿‡axios.defaults.timeoutè®¾ç½®é»˜è®¤çš„è¯·æ±‚è¶…æ—¶æ—¶é—´ã€‚ä¾‹å¦‚è¶…è¿‡äº†10sï¼Œå°±ä¼šå‘ŠçŸ¥ç”¨æˆ·å½“å‰è¯·æ±‚è¶…æ—¶ï¼Œè¯·åˆ·æ–°ç­‰ã€‚axios.defaults.timeout = 10000;</p><ul><li>postè¯·æ±‚å¤´çš„è®¾ç½®</li></ul><p>â€‹        postè¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸Šä¸€ä¸ªè¯·æ±‚å¤´ï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œä¸€ä¸ªé»˜è®¤çš„è®¾ç½®ï¼Œå³è®¾ç½®postçš„è¯·æ±‚å¤´ä¸ºapplication/x-www-form-urlencoded;charset=UTF-8</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="property">defaults</span>.<span class="property">headers</span>.<span class="property">post</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/x-www-form-urlencoded;charset=UTF-8&#x27;</span>;</span><br></pre></td></tr></table></figure><p>â€‹    æˆ‘ä»¬åœ¨å‘é€è¯·æ±‚å‰å¯ä»¥è¿›è¡Œä¸€ä¸ªè¯·æ±‚çš„æ‹¦æˆªï¼Œä¸ºä»€ä¹ˆè¦æ‹¦æˆªå‘¢ï¼Œæˆ‘ä»¬æ‹¦æˆªè¯·æ±‚æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢ï¼Ÿæ¯”å¦‚ï¼Œæœ‰äº›è¯·æ±‚æ˜¯éœ€è¦ç”¨æˆ·ç™»å½•ä¹‹åæ‰èƒ½è®¿é—®çš„ï¼Œæˆ–è€…postè¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åºåˆ—åŒ–æˆ‘ä»¬æäº¤çš„æ•°æ®ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¯·æ±‚è¢«å‘é€ä¹‹å‰è¿›è¡Œä¸€ä¸ªæ‹¦æˆªï¼Œä»è€Œè¿›è¡Œæˆ‘ä»¬æƒ³è¦çš„æ“ä½œã€‚</p><ul><li>è¯·æ±‚æ‹¦æˆª</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…ˆå¯¼å…¥vuex,å› ä¸ºæˆ‘ä»¬è¦ä½¿ç”¨åˆ°é‡Œé¢çš„çŠ¶æ€å¯¹è±¡</span></span><br><span class="line"><span class="comment">// vuexçš„è·¯å¾„æ ¹æ®è‡ªå·±çš„è·¯å¾„å»å†™</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store/index&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨axios.interceptors.request.use(    </span></span><br><span class="line">    <span class="function"><span class="params">config</span> =&gt;</span> &#123;        </span><br><span class="line">        <span class="comment">// æ¯æ¬¡å‘é€è¯·æ±‚ä¹‹å‰åˆ¤æ–­vuexä¸­æ˜¯å¦å­˜åœ¨token        </span></span><br><span class="line">        <span class="comment">// å¦‚æœå­˜åœ¨ï¼Œåˆ™ç»Ÿä¸€åœ¨httpè¯·æ±‚çš„headeréƒ½åŠ ä¸Štokenï¼Œè¿™æ ·åå°æ ¹æ®tokenåˆ¤æ–­ä½ çš„ç™»å½•æƒ…å†µ</span></span><br><span class="line">        <span class="comment">// å³ä½¿æœ¬åœ°å­˜åœ¨tokenï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­è¦å¯¹è¿”å›çŠ¶æ€è¿›è¡Œåˆ¤æ–­ </span></span><br><span class="line">        <span class="keyword">const</span> token = store.<span class="property">state</span>.<span class="property">token</span>;        </span><br><span class="line">        token &amp;&amp; (config.<span class="property">headers</span>.<span class="property">Authorization</span> = token);        </span><br><span class="line">        <span class="keyword">return</span> config;    </span><br><span class="line">    &#125;,    </span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;        </span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">error</span>(error);    </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>â€‹        è¿™é‡Œè¯´ä¸€ä¸‹tokenï¼Œä¸€èˆ¬æ˜¯åœ¨ç™»å½•å®Œæˆä¹‹åï¼Œå°†ç”¨æˆ·çš„tokené€šè¿‡localStorageæˆ–è€…cookieå­˜åœ¨æœ¬åœ°ï¼Œç„¶åç”¨æˆ·æ¯æ¬¡åœ¨è¿›å…¥é¡µé¢çš„æ—¶å€™ï¼ˆå³åœ¨main.jsä¸­ï¼‰ï¼Œä¼šé¦–å…ˆä»æœ¬åœ°å­˜å‚¨ä¸­è¯»å–tokenï¼Œå¦‚æœtokenå­˜åœ¨è¯´æ˜ç”¨æˆ·å·²ç»ç™»é™†è¿‡ï¼Œåˆ™æ›´æ–°vuexä¸­çš„tokençŠ¶æ€ã€‚ç„¶åï¼Œåœ¨æ¯æ¬¡è¯·æ±‚æ¥å£çš„æ—¶å€™ï¼Œéƒ½ä¼šåœ¨è¯·æ±‚çš„headerä¸­æºå¸¦tokenï¼Œåå°äººå‘˜å°±å¯ä»¥æ ¹æ®ä½ æºå¸¦çš„tokenæ¥åˆ¤æ–­ä½ çš„ç™»å½•æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœæ²¡æœ‰æºå¸¦ï¼Œåˆ™è¯´æ˜æ²¡æœ‰ç™»å½•è¿‡ã€‚è¿™æ—¶å€™æˆ–è®¸æœ‰äº›å°ä¼™ä¼´ä¼šæœ‰ç–‘é—®äº†ï¼Œå°±æ˜¯æ¯ä¸ªè¯·æ±‚éƒ½æºå¸¦tokenï¼Œé‚£ä¹ˆè¦æ˜¯ä¸€ä¸ªé¡µé¢ä¸éœ€è¦ç”¨æˆ·ç™»å½•å°±å¯ä»¥è®¿é—®çš„æ€ä¹ˆåŠå‘¢ï¼Ÿå…¶å®ï¼Œä½ å‰ç«¯çš„è¯·æ±‚å¯ä»¥æºå¸¦tokenï¼Œä½†æ˜¯åå°å¯ä»¥é€‰æ‹©ä¸æ¥æ”¶å•Šï¼</p><ul><li>å“åº”çš„æ‹¦æˆª</li></ul>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">  axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(    </span><br><span class="line">      <span class="function"><span class="params">response</span> =&gt;</span> &#123;   </span><br><span class="line">          <span class="comment">// å¦‚æœè¿”å›çš„çŠ¶æ€ç ä¸º200ï¼Œè¯´æ˜æ¥å£è¯·æ±‚æˆåŠŸï¼Œå¯ä»¥æ­£å¸¸æ‹¿åˆ°æ•°æ®     </span></span><br><span class="line">          <span class="comment">// å¦åˆ™çš„è¯æŠ›å‡ºé”™è¯¯</span></span><br><span class="line">          <span class="keyword">if</span> (response.<span class="property">status</span> === <span class="number">200</span>) &#123;            </span><br><span class="line">              <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(response);        </span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;            </span><br><span class="line">              <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(response);        </span><br><span class="line">          &#125;    </span><br><span class="line">      &#125;,    </span><br><span class="line">      <span class="comment">// æœåŠ¡å™¨çŠ¶æ€ç ä¸æ˜¯2å¼€å¤´çš„çš„æƒ…å†µ</span></span><br><span class="line">      <span class="comment">// è¿™é‡Œå¯ä»¥è·Ÿä½ ä»¬çš„åå°å¼€å‘äººå‘˜åå•†å¥½ç»Ÿä¸€çš„é”™è¯¯çŠ¶æ€ç     </span></span><br><span class="line">      <span class="comment">// ç„¶åæ ¹æ®è¿”å›çš„çŠ¶æ€ç è¿›è¡Œä¸€äº›æ“ä½œï¼Œä¾‹å¦‚ç™»å½•è¿‡æœŸæç¤ºï¼Œé”™è¯¯æç¤ºç­‰ç­‰</span></span><br><span class="line">      <span class="comment">// ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„æ“ä½œï¼Œå…¶ä»–éœ€æ±‚å¯è‡ªè¡Œæ‰©å±•</span></span><br><span class="line">      <span class="function"><span class="params">error</span> =&gt;</span> &#123;            </span><br><span class="line">          <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span>) &#123;            </span><br><span class="line">              <span class="keyword">switch</span> (error.<span class="property">response</span>.<span class="property">status</span>) &#123;                </span><br><span class="line">                  <span class="comment">// 401: æœªç™»å½•</span></span><br><span class="line">                  <span class="comment">// æœªç™»å½•åˆ™è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶æºå¸¦å½“å‰é¡µé¢çš„è·¯å¾„</span></span><br><span class="line">                  <span class="comment">// åœ¨ç™»å½•æˆåŠŸåè¿”å›å½“å‰é¡µé¢ï¼Œè¿™ä¸€æ­¥éœ€è¦åœ¨ç™»å½•é¡µæ“ä½œã€‚                </span></span><br><span class="line">                  <span class="keyword">case</span> <span class="number">401</span>:                    </span><br><span class="line">                      router.<span class="title function_">replace</span>(&#123;                        </span><br><span class="line">                          <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,                        </span><br><span class="line">                          <span class="attr">query</span>: &#123; </span><br><span class="line">                              <span class="attr">redirect</span>: router.<span class="property">currentRoute</span>.<span class="property">fullPath</span> </span><br><span class="line">                          &#125;</span><br><span class="line">                      &#125;);</span><br><span class="line">                      <span class="keyword">break</span>;</span><br><span class="line">  </span><br><span class="line">                <span class="comment">// 403 tokenè¿‡æœŸ</span></span><br><span class="line">                <span class="comment">// ç™»å½•è¿‡æœŸå¯¹ç”¨æˆ·è¿›è¡Œæç¤º</span></span><br><span class="line">                <span class="comment">// æ¸…é™¤æœ¬åœ°tokenå’Œæ¸…ç©ºvuexä¸­tokenå¯¹è±¡</span></span><br><span class="line">                <span class="comment">// è·³è½¬ç™»å½•é¡µé¢                </span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">                     <span class="title class_">Toast</span>(&#123;</span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&#x27;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#x27;</span>,</span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">1000</span>,</span><br><span class="line">                        <span class="attr">forbidClick</span>: <span class="literal">true</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="comment">// æ¸…é™¤token</span></span><br><span class="line">                    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">                    store.<span class="title function_">commit</span>(<span class="string">&#x27;loginSuccess&#x27;</span>, <span class="literal">null</span>);</span><br><span class="line">                    <span class="comment">// è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶å°†è¦æµè§ˆçš„é¡µé¢fullPathä¼ è¿‡å»ï¼Œç™»å½•æˆåŠŸåè·³è½¬éœ€è¦è®¿é—®çš„é¡µé¢ </span></span><br><span class="line">                    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;                        </span><br><span class="line">                        router.<span class="title function_">replace</span>(&#123;                            </span><br><span class="line">                            <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,                            </span><br><span class="line">                            <span class="attr">query</span>: &#123; </span><br><span class="line">                                <span class="attr">redirect</span>: router.<span class="property">currentRoute</span>.<span class="property">fullPath</span> </span><br><span class="line">                            &#125;                        </span><br><span class="line">                        &#125;);                    </span><br><span class="line">                    &#125;, <span class="number">1000</span>);                    </span><br><span class="line">                    <span class="keyword">break</span>; </span><br><span class="line">    </span><br><span class="line">                <span class="comment">// 404è¯·æ±‚ä¸å­˜åœ¨</span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">                    <span class="title class_">Toast</span>(&#123;</span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&#x27;ç½‘ç»œè¯·æ±‚ä¸å­˜åœ¨&#x27;</span>,</span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">1500</span>,</span><br><span class="line">                        <span class="attr">forbidClick</span>: <span class="literal">true</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">// å…¶ä»–é”™è¯¯ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯æç¤º</span></span><br><span class="line">                <span class="attr">default</span>:</span><br><span class="line">                    <span class="title class_">Toast</span>(&#123;</span><br><span class="line">                        <span class="attr">message</span>: error.<span class="property">response</span>.<span class="property">data</span>.<span class="property">message</span>,</span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">1500</span>,</span><br><span class="line">                        <span class="attr">forbidClick</span>: <span class="literal">true</span></span><br><span class="line">                    &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error.<span class="property">response</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">â€‹å“åº”æ‹¦æˆªå™¨å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æœåŠ¡å™¨è¿”å›ç»™æˆ‘ä»¬çš„æ•°æ®ï¼Œæˆ‘ä»¬åœ¨æ‹¿åˆ°ä¹‹å‰å¯ä»¥å¯¹ä»–è¿›è¡Œä¸€äº›å¤„ç†ã€‚ä¾‹å¦‚ä¸Šé¢çš„æ€æƒ³ï¼šå¦‚æœåå°è¿”å›çš„çŠ¶æ€ç æ˜¯<span class="number">200</span>ï¼Œåˆ™æ­£å¸¸è¿”å›æ•°æ®ï¼Œå¦åˆ™çš„æ ¹æ®é”™è¯¯çš„çŠ¶æ€ç ç±»å‹è¿›è¡Œä¸€äº›æˆ‘ä»¬éœ€è¦çš„é”™è¯¯ï¼Œå…¶å®è¿™é‡Œä¸»è¦å°±æ˜¯è¿›è¡Œäº†é”™è¯¯çš„ç»Ÿä¸€å¤„ç†å’Œæ²¡ç™»å½•æˆ–ç™»å½•è¿‡æœŸåè°ƒæ•´ç™»å½•é¡µçš„ä¸€ä¸ªæ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">â€‹è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„<span class="title class_">Toast</span>()æ–¹æ³•ï¼Œæ˜¯æˆ‘å¼•å…¥çš„vantåº“ä¸­çš„toastè½»æç¤ºç»„ä»¶ï¼Œä½ æ ¹æ®ä½ çš„uiåº“ï¼Œå¯¹åº”ä½¿ç”¨ä½ çš„ä¸€ä¸ªæç¤ºç»„ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">* å°è£…getæ–¹æ³•å’Œpostæ–¹æ³•</span><br><span class="line"></span><br><span class="line">â€‹æˆ‘ä»¬å¸¸ç”¨çš„ajaxè¯·æ±‚æ–¹æ³•æœ‰getã€postã€putç­‰æ–¹æ³•ï¼Œç›¸ä¿¡å°ä¼™ä¼´éƒ½ä¸ä¼šé™Œç”Ÿã€‚axioså¯¹åº”çš„ä¹Ÿæœ‰å¾ˆå¤šç±»ä¼¼çš„æ–¹æ³•ï¼Œä¸æ¸…æ¥šçš„å¯ä»¥çœ‹ä¸‹æ–‡æ¡£ã€‚ä½†æ˜¯ä¸ºäº†ç®€åŒ–æˆ‘ä»¬çš„ä»£ç ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å¯¹å…¶è¿›è¡Œä¸€ä¸ªç®€å•çš„å°è£…ã€‚ä¸‹é¢æˆ‘ä»¬ä¸»è¦å°è£…ä¸¤ä¸ªæ–¹æ³•ï¼šgetå’Œpostã€‚</span><br><span class="line"></span><br><span class="line">* getæ–¹æ³•ï¼š</span><br><span class="line"></span><br><span class="line">â€‹æˆ‘ä»¬é€šè¿‡å®šä¹‰ä¸€ä¸ªgetå‡½æ•°ï¼Œgetå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæˆ‘ä»¬è¦è¯·æ±‚çš„urlåœ°å€ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬è¦æºå¸¦çš„è¯·æ±‚å‚æ•°ã€‚getå‡½æ•°è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå½“axioså…¶è¯·æ±‚æˆåŠŸæ—¶resolveæœåŠ¡å™¨è¿”å› å€¼ï¼Œè¯·æ±‚å¤±è´¥æ—¶rejecté”™è¯¯å€¼ã€‚æœ€åé€šè¿‡<span class="keyword">export</span>æŠ›å‡ºgetå‡½æ•°ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`javascript</span></span><br><span class="line"><span class="string">/**</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> * getæ–¹æ³•ï¼Œå¯¹åº”getè¯·æ±‚</span></span><br><span class="line"><span class="string"> * @param &#123;String&#125; url [è¯·æ±‚çš„urlåœ°å€]</span></span><br><span class="line"><span class="string"> * @param &#123;Object&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°]</span></span><br><span class="line"><span class="string">   */</span></span><br><span class="line"><span class="string">   export function get(url, params)&#123;    </span></span><br><span class="line"><span class="string">   return new Promise((resolve, reject) =&gt;&#123;        </span></span><br><span class="line"><span class="string">       axios.get(url, &#123;            </span></span><br><span class="line"><span class="string">           params: params        </span></span><br><span class="line"><span class="string">       &#125;).then(res =&gt; &#123;</span></span><br><span class="line"><span class="string">           resolve(res.data);</span></span><br><span class="line"><span class="string">       &#125;).catch(err =&gt;&#123;</span></span><br><span class="line"><span class="string">           reject(err.data)        </span></span><br><span class="line"><span class="string">   &#125;)    </span></span><br><span class="line"><span class="string">   &#125;);&#125;</span></span><br></pre></td></tr></table></figure><ul><li>postæ–¹æ³•ï¼š</li></ul><p>â€‹        åŸç†åŒgetåŸºæœ¬ä¸€æ ·ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼Œpostæ–¹æ³•å¿…é¡»è¦ä½¿ç”¨å¯¹æäº¤ä»å‚æ•°å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–çš„æ“ä½œï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€šè¿‡nodeçš„qsæ¨¡å—æ¥åºåˆ—åŒ–æˆ‘ä»¬çš„å‚æ•°ã€‚è¿™ä¸ªå¾ˆé‡è¦ï¼Œå¦‚æœæ²¡æœ‰åºåˆ—åŒ–æ“ä½œï¼Œåå°æ˜¯æ‹¿ä¸åˆ°ä½ æäº¤çš„æ•°æ®çš„ã€‚è¿™å°±æ˜¯æ–‡ç« å¼€å¤´æˆ‘ä»¬import QS from â€˜qsâ€™;çš„åŸå› ã€‚å¦‚æœä¸æ˜ç™½åºåˆ—åŒ–æ˜¯ä»€ä¹ˆæ„æ€çš„ï¼Œå°±ç™¾åº¦ä¸€ä¸‹å§ï¼Œç­”æ¡ˆä¸€å¤§å †ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * postæ–¹æ³•ï¼Œå¯¹åº”postè¯·æ±‚ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; url [è¯·æ±‚çš„urlåœ°å€] </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°] </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">post</span>(<span class="params">url, params</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        axios.<span class="title function_">post</span>(url, <span class="variable constant_">QS</span>.<span class="title function_">stringify</span>(params))</span><br><span class="line">       .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">           <span class="title function_">resolve</span>(res.<span class="property">data</span>);</span><br><span class="line">       &#125;)</span><br><span class="line">       .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span>&#123;</span><br><span class="line">           <span class="title function_">reject</span>(err.<span class="property">data</span>)</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>â€‹        è¿™é‡Œæœ‰ä¸ªå°ç»†èŠ‚è¯´ä¸‹ï¼Œaxios.get()æ–¹æ³•å’Œaxios.post()åœ¨æäº¤æ•°æ®æ—¶å‚æ•°çš„ä¹¦å†™æ–¹å¼è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚åŒºåˆ«å°±æ˜¯ï¼Œgetçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª{}ï¼Œç„¶åè¿™ä¸ªå¯¹è±¡çš„paramså±æ€§å€¼æ˜¯ä¸€ä¸ªå‚æ•°å¯¹è±¡çš„ã€‚è€Œpostçš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ªå‚æ•°å¯¹è±¡ã€‚ä¸¤è€…ç•¥å¾®çš„åŒºåˆ«è¦ç•™æ„å“¦ï¼</p><ul><li>axiosçš„å°è£…åŸºæœ¬å°±å®Œæˆäº†ï¼Œä¸‹é¢å†ç®€å•è¯´ä¸‹apiçš„ç»Ÿä¸€ç®¡ç†ã€‚</li></ul><p>â€‹        æ•´é½çš„apiå°±åƒç”µè·¯æ¿ä¸€æ ·ï¼Œå³ä½¿å†å¤æ‚ä¹Ÿèƒ½å¾ˆæ¸…æ™°æ•´ä¸ªçº¿è·¯ã€‚ä¸Šé¢è¯´äº†ï¼Œæˆ‘ä»¬ä¼šæ–°å»ºä¸€ä¸ªapi.js,ç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å­˜æ”¾æˆ‘ä»¬æ‰€æœ‰çš„apiæ¥å£ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬åœ¨api.jsä¸­å¼•å…¥æˆ‘ä»¬å°è£…çš„getå’Œpostæ–¹æ³•</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  apiæ¥å£ç»Ÿä¸€ç®¡ç† </span></span><br><span class="line"><span class="keyword">import</span> &#123; get, post &#125; <span class="keyword">from</span> <span class="string">&#x27;./http&#x27;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œä¾‹å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªæ¥å£ï¼Œæ˜¯ä¸€ä¸ªpostè¯·æ±‚ï¼š</p><p><a href="http://www.baiodu.com/api/v1/users/my_address/address_edit_before">http://www.baiodu.com/api/v1/users/my_address/address_edit_before</a><br>æˆ‘ä»¬å¯ä»¥åœ¨api.jsä¸­è¿™æ ·å°è£…ï¼š</p><p>export const apiAddress = p =&gt; post(â€˜api/v1/users/my_address/address_edit_beforeâ€™, p);</p><p>â€‹        æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªapiAddressæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªå‚æ•°pï¼Œpæ˜¯æˆ‘ä»¬è¯·æ±‚æ¥å£æ—¶æºå¸¦çš„å‚æ•°å¯¹è±¡ã€‚è€Œåè°ƒç”¨äº†æˆ‘ä»¬å°è£…çš„postæ–¹æ³•ï¼Œpostæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬çš„æ¥å£åœ°å€ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯apiAddressçš„på‚æ•°ï¼Œå³è¯·æ±‚æ¥å£æ—¶æºå¸¦çš„å‚æ•°å¯¹è±¡ã€‚æœ€åé€šè¿‡exportå¯¼å‡ºapiAddressã€‚</p><p>â€‹        ç„¶ååœ¨æˆ‘ä»¬çš„é¡µé¢ä¸­å¯ä»¥è¿™æ ·è°ƒç”¨æˆ‘ä»¬çš„apiæ¥å£ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; apiAddress &#125; <span class="keyword">from</span> <span class="string">&#x27;@/request/api&#x27;</span>;<span class="comment">// å¯¼å…¥æˆ‘ä»¬çš„apiæ¥å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;        </span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Address&#x27;</span>,    </span><br><span class="line">    created () &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">onLoad</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;            </span><br><span class="line">        <span class="comment">// è·å–æ•°æ®            </span></span><br><span class="line">        <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨apiæ¥å£ï¼Œå¹¶ä¸”æä¾›äº†ä¸¤ä¸ªå‚æ•°                </span></span><br><span class="line">            <span class="title function_">apiAddress</span>(&#123;                    </span><br><span class="line">                <span class="attr">type</span>: <span class="number">0</span>,                    </span><br><span class="line">                <span class="attr">sort</span>: <span class="number">1</span>                </span><br><span class="line">            &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// è·å–æ•°æ®æˆåŠŸåçš„å…¶ä»–æ“ä½œ</span></span><br><span class="line">                â€¦â€¦â€¦â€¦â€¦â€¦                </span><br><span class="line">            &#125;)            </span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹        å…¶ä»–çš„apiæ¥å£ï¼Œå°±åœ¨pai.jsä¸­ç»§ç»­å¾€ä¸‹é¢æ‰©å±•å°±å¯ä»¥äº†ã€‚å‹æƒ…æç¤ºï¼Œä¸ºæ¯ä¸ªæ¥å£å†™å¥½æ³¨é‡Šå“¦ï¼ï¼ï¼</p><p>â€‹        apiæ¥å£ç®¡ç†çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œæˆ‘ä»¬æŠŠapiç»Ÿä¸€é›†ä¸­èµ·æ¥ï¼Œå¦‚æœåæœŸéœ€è¦ä¿®æ”¹æ¥å£ï¼Œæˆ‘ä»¬å°±ç›´æ¥åœ¨api.jsä¸­æ‰¾åˆ°å¯¹åº”çš„ä¿®æ”¹å°±å¥½äº†ï¼Œè€Œä¸ç”¨å»æ¯ä¸€ä¸ªé¡µé¢æŸ¥æ‰¾æˆ‘ä»¬çš„æ¥å£ç„¶åå†ä¿®æ”¹ä¼šå¾ˆéº»çƒ¦ã€‚å…³é”®æ˜¯ï¼Œä¸‡ä¸€ä¿®æ”¹çš„é‡æ¯”è¾ƒå¤§ï¼Œå°±è§„æ ¼ggäº†ã€‚è¿˜æœ‰å°±æ˜¯å¦‚æœç›´æ¥åœ¨æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç ä¿®æ”¹æ¥å£ï¼Œä¸€ä¸å°å¿ƒè¿˜å®¹æ˜“åŠ¨åˆ°æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç é€ æˆä¸å¿…è¦çš„éº»çƒ¦ã€‚</p><p>â€‹        å¥½äº†ï¼Œæœ€åæŠŠå®Œæˆçš„axioså°è£…ä»£ç å¥‰ä¸Šã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**axioså°è£…</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * è¯·æ±‚æ‹¦æˆªã€ç›¸åº”æ‹¦æˆªã€é”™è¯¯ç»Ÿä¸€å¤„ç†</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;<span class="keyword">import</span> <span class="variable constant_">QS</span> <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span>;</span><br><span class="line">   <span class="keyword">import</span> &#123; <span class="title class_">Toast</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span>;</span><br><span class="line">   <span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;../store/index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¯å¢ƒçš„åˆ‡æ¢</span></span><br><span class="line"><span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> == <span class="string">&#x27;development&#x27;</span>) &#123;    </span><br><span class="line">    axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;/api&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> == <span class="string">&#x27;debug&#x27;</span>) &#123;    </span><br><span class="line">    axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> == <span class="string">&#x27;production&#x27;</span>) &#123;    </span><br><span class="line">    axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;http://api.123dailu.com/&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚è¶…æ—¶æ—¶é—´</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">timeout</span> = <span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// postè¯·æ±‚å¤´</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">headers</span>.<span class="property">post</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/x-www-form-urlencoded;charset=UTF-8&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(    </span><br><span class="line">    <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ¯æ¬¡å‘é€è¯·æ±‚ä¹‹å‰åˆ¤æ–­æ˜¯å¦å­˜åœ¨tokenï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ç»Ÿä¸€åœ¨httpè¯·æ±‚çš„headeréƒ½åŠ ä¸Štokenï¼Œä¸ç”¨æ¯æ¬¡è¯·æ±‚éƒ½æ‰‹åŠ¨æ·»åŠ äº†</span></span><br><span class="line">        <span class="comment">// å³ä½¿æœ¬åœ°å­˜åœ¨tokenï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­è¦å¯¹è¿”å›çŠ¶æ€è¿›è¡Œåˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">const</span> token = store.<span class="property">state</span>.<span class="property">token</span>;        </span><br><span class="line">        token &amp;&amp; (config.<span class="property">headers</span>.<span class="property">Authorization</span> = token);        </span><br><span class="line">        <span class="keyword">return</span> config;    </span><br><span class="line">    &#125;,    </span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;        </span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">error</span>(error);    </span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(    </span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;        </span><br><span class="line">        <span class="keyword">if</span> (response.<span class="property">status</span> === <span class="number">200</span>) &#123;            </span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(response);        </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;            </span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(response);        </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æœåŠ¡å™¨çŠ¶æ€ç ä¸æ˜¯200çš„æƒ…å†µ    </span></span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;        </span><br><span class="line">        <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span>) &#123;            </span><br><span class="line">            <span class="keyword">switch</span> (error.<span class="property">response</span>.<span class="property">status</span>) &#123;                </span><br><span class="line">                <span class="comment">// 401: æœªç™»å½•                </span></span><br><span class="line">                <span class="comment">// æœªç™»å½•åˆ™è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶æºå¸¦å½“å‰é¡µé¢çš„è·¯å¾„                </span></span><br><span class="line">                <span class="comment">// åœ¨ç™»å½•æˆåŠŸåè¿”å›å½“å‰é¡µé¢ï¼Œè¿™ä¸€æ­¥éœ€è¦åœ¨ç™»å½•é¡µæ“ä½œã€‚                </span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">401</span>:                    </span><br><span class="line">                    router.<span class="title function_">replace</span>(&#123;                        </span><br><span class="line">                        <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,                        </span><br><span class="line">                        <span class="attr">query</span>: &#123; <span class="attr">redirect</span>: router.<span class="property">currentRoute</span>.<span class="property">fullPath</span> &#125; </span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">// 403 tokenè¿‡æœŸ                </span></span><br><span class="line">                <span class="comment">// ç™»å½•è¿‡æœŸå¯¹ç”¨æˆ·è¿›è¡Œæç¤º                </span></span><br><span class="line">                <span class="comment">// æ¸…é™¤æœ¬åœ°tokenå’Œæ¸…ç©ºvuexä¸­tokenå¯¹è±¡                </span></span><br><span class="line">                <span class="comment">// è·³è½¬ç™»å½•é¡µé¢                </span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">403</span>:                     </span><br><span class="line">                    <span class="title class_">Toast</span>(&#123;                        </span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&#x27;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#x27;</span>,                        </span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">1000</span>,                        </span><br><span class="line">                        <span class="attr">forbidClick</span>: <span class="literal">true</span>                    </span><br><span class="line">                    &#125;);                    </span><br><span class="line">                    <span class="comment">// æ¸…é™¤token                    </span></span><br><span class="line">                    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;token&#x27;</span>);                    </span><br><span class="line">                    store.<span class="title function_">commit</span>(<span class="string">&#x27;loginSuccess&#x27;</span>, <span class="literal">null</span>);                    </span><br><span class="line">                    <span class="comment">// è·³è½¬ç™»å½•é¡µé¢ï¼Œå¹¶å°†è¦æµè§ˆçš„é¡µé¢fullPathä¼ è¿‡å»ï¼Œç™»å½•æˆåŠŸåè·³è½¬éœ€è¦è®¿é—®çš„é¡µé¢</span></span><br><span class="line">                    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;                        </span><br><span class="line">                        router.<span class="title function_">replace</span>(&#123;                            </span><br><span class="line">                            <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,                            </span><br><span class="line">                            <span class="attr">query</span>: &#123; </span><br><span class="line">                                <span class="attr">redirect</span>: router.<span class="property">currentRoute</span>.<span class="property">fullPath</span> </span><br><span class="line">                            &#125;                        </span><br><span class="line">                        &#125;);                    </span><br><span class="line">                    &#125;, <span class="number">1000</span>);                    </span><br><span class="line">                    <span class="keyword">break</span>; </span><br><span class="line">                <span class="comment">// 404è¯·æ±‚ä¸å­˜åœ¨                </span></span><br><span class="line">                <span class="keyword">case</span> <span class="number">404</span>:                    </span><br><span class="line">                    <span class="title class_">Toast</span>(&#123;                        </span><br><span class="line">                        <span class="attr">message</span>: <span class="string">&#x27;ç½‘ç»œè¯·æ±‚ä¸å­˜åœ¨&#x27;</span>,                        </span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">1500</span>,                        </span><br><span class="line">                        <span class="attr">forbidClick</span>: <span class="literal">true</span>                    </span><br><span class="line">                    &#125;);                    </span><br><span class="line">                <span class="keyword">break</span>;                </span><br><span class="line">                <span class="comment">// å…¶ä»–é”™è¯¯ï¼Œç›´æ¥æŠ›å‡ºé”™è¯¯æç¤º                </span></span><br><span class="line">                <span class="attr">default</span>:                    </span><br><span class="line">                    <span class="title class_">Toast</span>(&#123;                        </span><br><span class="line">                        <span class="attr">message</span>: error.<span class="property">response</span>.<span class="property">data</span>.<span class="property">message</span>,                        </span><br><span class="line">                        <span class="attr">duration</span>: <span class="number">1500</span>,                        </span><br><span class="line">                        <span class="attr">forbidClick</span>: <span class="literal">true</span>                    </span><br><span class="line">                    &#125;);            </span><br><span class="line">            &#125;            </span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error.<span class="property">response</span>);        </span><br><span class="line">        &#125;       </span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * getæ–¹æ³•ï¼Œå¯¹åº”getè¯·æ±‚ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; url [è¯·æ±‚çš„urlåœ°å€] </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°] </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">get</span>(<span class="params">url, params</span>)&#123;    </span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;        </span><br><span class="line">       axios.<span class="title function_">get</span>(url, &#123;            </span><br><span class="line">           <span class="attr">params</span>: params        </span><br><span class="line">       &#125;)        </span><br><span class="line">       .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;            </span><br><span class="line">           <span class="title function_">resolve</span>(res.<span class="property">data</span>);        </span><br><span class="line">       &#125;)        </span><br><span class="line">       .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;            </span><br><span class="line">           <span class="title function_">reject</span>(err.<span class="property">data</span>)        </span><br><span class="line">       &#125;)    </span><br><span class="line">   &#125;);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">/** </span></span><br><span class="line"><span class="comment"> * postæ–¹æ³•ï¼Œå¯¹åº”postè¯·æ±‚ </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">String</span>&#125; url [è¯·æ±‚çš„urlåœ°å€] </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; params [è¯·æ±‚æ—¶æºå¸¦çš„å‚æ•°] </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">post</span>(<span class="params">url, params</span>) &#123;    </span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;         </span><br><span class="line">       axios.<span class="title function_">post</span>(url, <span class="variable constant_">QS</span>.<span class="title function_">stringify</span>(params))        </span><br><span class="line">       .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;            </span><br><span class="line">           <span class="title function_">resolve</span>(res.<span class="property">data</span>);        </span><br><span class="line">       &#125;)        </span><br><span class="line">       .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;            </span><br><span class="line">           <span class="title function_">reject</span>(err.<span class="property">data</span>)        </span><br><span class="line">       &#125;)    </span><br><span class="line">   &#125;);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒã€axiosçš„å°è£…æ ¹æ®éœ€æ±‚çš„ä¸åŒè€Œä¸åŒã€‚"><a href="#äºŒã€axiosçš„å°è£…æ ¹æ®éœ€æ±‚çš„ä¸åŒè€Œä¸åŒã€‚" class="headerlink" title="äºŒã€axiosçš„å°è£…æ ¹æ®éœ€æ±‚çš„ä¸åŒè€Œä¸åŒã€‚"></a>äºŒã€axiosçš„å°è£…æ ¹æ®éœ€æ±‚çš„ä¸åŒè€Œä¸åŒã€‚</h2><blockquote><p>1.ä¼˜åŒ–axioså°è£…ï¼Œå»æ‰ä¹‹å‰çš„getå’Œpost</p><p>2.æ–­ç½‘æƒ…å†µå¤„ç†</p><p>3.æ›´åŠ æ¨¡å—åŒ–çš„apiç®¡ç†</p><p>4.æ¥å£åŸŸåæœ‰å¤šä¸ªçš„æƒ…å†µ</p><p>5.apiæŒ‚è½½åˆ°vue.prototypeä¸Šçœå»å¼•å…¥çš„æ­¥éª¤</p></blockquote><ul><li>http.jsä¸­axioså°è£…çš„ä¼˜åŒ–ï¼Œå…ˆç›´æ¥è´´ä»£ç ï¼š</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * axioså°è£…</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚æ‹¦æˆªã€å“åº”æ‹¦æˆªã€é”™è¯¯ç»Ÿä¸€å¤„ç†</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line">   <span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;../router&#x27;</span>;</span><br><span class="line">   <span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;../store/index&#x27;</span>;</span><br><span class="line">   <span class="keyword">import</span> &#123; <span class="title class_">Toast</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * æç¤ºå‡½æ•° </span></span><br><span class="line"><span class="comment"> * ç¦æ­¢ç‚¹å‡»è’™å±‚ã€æ˜¾ç¤ºä¸€ç§’åå…³é—­</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">const</span> <span class="title function_">tip</span> = msg =&gt; &#123;    </span><br><span class="line">   <span class="title class_">Toast</span>(&#123;        </span><br><span class="line">       <span class="attr">message</span>: msg,        </span><br><span class="line">       <span class="attr">duration</span>: <span class="number">1000</span>,        </span><br><span class="line">       <span class="attr">forbidClick</span>: <span class="literal">true</span>    </span><br><span class="line">   &#125;);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line"><span class="comment"> * æºå¸¦å½“å‰é¡µé¢è·¯ç”±ï¼Œä»¥æœŸåœ¨ç™»å½•é¡µé¢å®Œæˆç™»å½•åè¿”å›å½“å‰é¡µé¢</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">const</span> <span class="title function_">toLogin</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">   router.<span class="title function_">replace</span>(&#123;</span><br><span class="line">       <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,        </span><br><span class="line">       <span class="attr">query</span>: &#123;</span><br><span class="line">           <span class="attr">redirect</span>: router.<span class="property">currentRoute</span>.<span class="property">fullPath</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * è¯·æ±‚å¤±è´¥åçš„é”™è¯¯ç»Ÿä¸€å¤„ç† </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Number</span>&#125; status è¯·æ±‚å¤±è´¥çš„çŠ¶æ€ç </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">const</span> <span class="title function_">errorHandle</span> = (<span class="params">status, other</span>) =&gt; &#123;</span><br><span class="line">   <span class="comment">// çŠ¶æ€ç åˆ¤æ–­</span></span><br><span class="line">   <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">       <span class="comment">// 401: æœªç™»å½•çŠ¶æ€ï¼Œè·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">       <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">           <span class="title function_">toLogin</span>();</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       <span class="comment">// 403 tokenè¿‡æœŸ</span></span><br><span class="line">       <span class="comment">// æ¸…é™¤tokenå¹¶è·³è½¬ç™»å½•é¡µ</span></span><br><span class="line">       <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">           <span class="title function_">tip</span>(<span class="string">&#x27;ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#x27;</span>);</span><br><span class="line">           <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">           store.<span class="title function_">commit</span>(<span class="string">&#x27;loginSuccess&#x27;</span>, <span class="literal">null</span>);</span><br><span class="line">           <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">               <span class="title function_">toLogin</span>();</span><br><span class="line">           &#125;, <span class="number">1000</span>);</span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       <span class="comment">// 404è¯·æ±‚ä¸å­˜åœ¨</span></span><br><span class="line">       <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">           <span class="title function_">tip</span>(<span class="string">&#x27;è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨&#x27;</span>); </span><br><span class="line">           <span class="keyword">break</span>;</span><br><span class="line">       <span class="attr">default</span>:</span><br><span class="line">           <span class="variable language_">console</span>.<span class="title function_">log</span>(other);   </span><br><span class="line">       &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºaxioså®ä¾‹</span></span><br><span class="line"><span class="keyword">var</span> instance = axios.<span class="title function_">create</span>(&#123;    <span class="attr">timeout</span>: <span class="number">1000</span> * <span class="number">12</span>&#125;);</span><br><span class="line"><span class="comment">// è®¾ç½®postè¯·æ±‚å¤´</span></span><br><span class="line">instance.<span class="property">defaults</span>.<span class="property">headers</span>.<span class="property">post</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>;</span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * è¯·æ±‚æ‹¦æˆªå™¨ </span></span><br><span class="line"><span class="comment"> * æ¯æ¬¡è¯·æ±‚å‰ï¼Œå¦‚æœå­˜åœ¨tokenåˆ™åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦token </span></span><br><span class="line"><span class="comment">   */</span> </span><br><span class="line">   instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(    </span><br><span class="line">   <span class="function"><span class="params">config</span> =&gt;</span> &#123;        </span><br><span class="line">       <span class="comment">// ç™»å½•æµç¨‹æ§åˆ¶ä¸­ï¼Œæ ¹æ®æœ¬åœ°æ˜¯å¦å­˜åœ¨tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µ        </span></span><br><span class="line">       <span class="comment">// ä½†æ˜¯å³ä½¿tokenå­˜åœ¨ï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨æ¯æ¬¡çš„è¯·æ±‚å¤´ä¸­æºå¸¦token        </span></span><br><span class="line">       <span class="comment">// åå°æ ¹æ®æºå¸¦çš„tokenåˆ¤æ–­ç”¨æˆ·çš„ç™»å½•æƒ…å†µï¼Œå¹¶è¿”å›ç»™æˆ‘ä»¬å¯¹åº”çš„çŠ¶æ€ç         </span></span><br><span class="line">       <span class="comment">// è€Œåæˆ‘ä»¬å¯ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­ï¼Œæ ¹æ®çŠ¶æ€ç è¿›è¡Œä¸€äº›ç»Ÿä¸€çš„æ“ä½œã€‚        </span></span><br><span class="line">       <span class="keyword">const</span> token = store.<span class="property">state</span>.<span class="property">token</span>;        </span><br><span class="line">       token &amp;&amp; (config.<span class="property">headers</span>.<span class="property">Authorization</span> = token);        </span><br><span class="line">       <span class="keyword">return</span> config;    </span><br><span class="line">   &#125;,    </span><br><span class="line">   <span class="function"><span class="params">error</span> =&gt;</span> <span class="title class_">Promise</span>.<span class="title function_">error</span>(error))</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(    </span><br><span class="line">    <span class="comment">// è¯·æ±‚æˆåŠŸ</span></span><br><span class="line">    <span class="function"><span class="params">res</span> =&gt;</span> res.<span class="property">status</span> === <span class="number">200</span> ? <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(res) : <span class="title class_">Promise</span>.<span class="title function_">reject</span>(res),    </span><br><span class="line">    <span class="comment">// è¯·æ±‚å¤±è´¥</span></span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; response &#125; = error;</span><br><span class="line">        <span class="keyword">if</span> (response) &#123;</span><br><span class="line">            <span class="comment">// è¯·æ±‚å·²å‘å‡ºï¼Œä½†æ˜¯ä¸åœ¨2xxçš„èŒƒå›´ </span></span><br><span class="line">            <span class="title function_">errorHandle</span>(response.<span class="property">status</span>, response.<span class="property">data</span>.<span class="property">message</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(response);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¤„ç†æ–­ç½‘çš„æƒ…å†µ</span></span><br><span class="line">            <span class="comment">// eg:è¯·æ±‚è¶…æ—¶æˆ–æ–­ç½‘æ—¶ï¼Œæ›´æ–°stateçš„networkçŠ¶æ€</span></span><br><span class="line">            <span class="comment">// networkçŠ¶æ€åœ¨app.vueä¸­æ§åˆ¶ç€ä¸€ä¸ªå…¨å±€çš„æ–­ç½‘æç¤ºç»„ä»¶çš„æ˜¾ç¤ºéšè—</span></span><br><span class="line">            <span class="comment">// å…³äºæ–­ç½‘ç»„ä»¶ä¸­çš„åˆ·æ–°é‡æ–°è·å–æ•°æ®ï¼Œä¼šåœ¨æ–­ç½‘ç»„ä»¶ä¸­è¯´æ˜</span></span><br><span class="line">            <span class="keyword">if</span> (!<span class="variable language_">window</span>.<span class="property">navigator</span>.<span class="property">onLine</span>) &#123;</span><br><span class="line">               store.<span class="title function_">commit</span>(<span class="string">&#x27;changeNetwork&#x27;</span>, <span class="literal">false</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> instance;</span><br></pre></td></tr></table></figure><p>â€‹    è¿™ä¸ªaxioså’Œä¹‹å‰çš„å¤§åŒå°å¼‚ï¼Œåšäº†å¦‚ä¸‹å‡ ç‚¹æ”¹å˜ï¼š</p><blockquote><p>1.å»æ‰äº†ä¹‹å‰getå’Œpostæ–¹æ³•çš„å°è£…ï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªaxioså®ä¾‹ç„¶åexport defaultæ–¹æ³•å¯¼å‡ºï¼Œè¿™æ ·ä½¿ç”¨èµ·æ¥æ›´çµæ´»ä¸€äº›ã€‚</p><p>2.å»æ‰äº†é€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶baseUrlçš„å€¼ã€‚è€ƒè™‘åˆ°æ¥å£ä¼šæœ‰å¤šä¸ªä¸åŒåŸŸåçš„æƒ…å†µï¼Œæ‰€ä»¥å‡†å¤‡é€šè¿‡jså˜é‡æ¥æ§åˆ¶æ¥å£åŸŸåã€‚è¿™ç‚¹å…·ä½“åœ¨apié‡Œä¼šä»‹ç»ã€‚</p><p>3.å¢åŠ äº†è¯·æ±‚è¶…æ—¶ï¼Œå³æ–­ç½‘çŠ¶æ€çš„å¤„ç†ã€‚è¯´ä¸‹æ€è·¯ï¼Œå½“æ–­ç½‘æ—¶ï¼Œé€šè¿‡æ›´æ–°vuexä¸­networkçš„çŠ¶æ€æ¥æ§åˆ¶æ–­ç½‘æç¤ºç»„ä»¶çš„æ˜¾ç¤ºéšè—ã€‚æ–­ç½‘æç¤ºä¸€èˆ¬ä¼šæœ‰é‡æ–°åŠ è½½æ•°æ®çš„æ“ä½œï¼Œè¿™æ­¥ä¼šåœ¨åé¢å¯¹åº”çš„åœ°æ–¹ä»‹ç»ã€‚</p><p>4.å…¬ç”¨å‡½æ•°è¿›è¡ŒæŠ½å‡ºï¼Œç®€åŒ–ä»£ç ï¼Œå°½é‡ä¿è¯å•ä¸€èŒè´£åŸåˆ™ã€‚</p></blockquote><p>â€‹    ä¸‹é¢è¯´ä¸‹apiè¿™å—ï¼Œè€ƒè™‘åˆ°ä¸€ä¸‹éœ€æ±‚ï¼š</p><blockquote><p>1.æ›´åŠ æ¨¡å—åŒ–</p><p>2.æ›´æ–¹ä¾¿å¤šäººå¼€å‘ï¼Œæœ‰æ•ˆå‡å°‘è§£å†³å‘½åå†²çª</p><p>3.å¤„ç†æ¥å£åŸŸåæœ‰å¤šä¸ªæƒ…å†µ</p></blockquote><p>â€‹        è¿™é‡Œè¿™é‡Œå‘¢æ–°å»ºäº†ä¸€ä¸ªapiæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªindex.jså’Œä¸€ä¸ªbase.jsï¼Œä»¥åŠå¤šä¸ªæ ¹æ®æ¨¡å—åˆ’åˆ†çš„æ¥å£jsæ–‡ä»¶ã€‚index.jsæ˜¯ä¸€ä¸ªapiçš„å‡ºå£ï¼Œbase.jsç®¡ç†æ¥å£åŸŸåï¼Œå…¶ä»–jsåˆ™ç”¨æ¥ç®¡ç†å„ä¸ªæ¨¡å—çš„æ¥å£ã€‚</p><p>å…ˆæ”¾index.jsä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * apiæ¥å£çš„ç»Ÿä¸€å‡ºå£</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="comment">// æ–‡ç« æ¨¡å—æ¥å£</span></span><br><span class="line">   <span class="keyword">import</span> article <span class="keyword">from</span> <span class="string">&#x27;@/api/article&#x27;</span>;</span><br><span class="line">   <span class="comment">// å…¶ä»–æ¨¡å—çš„æ¥å£â€¦â€¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºæ¥å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;    </span><br><span class="line">    article,</span><br><span class="line">    <span class="comment">// â€¦â€¦</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹        index.jsæ˜¯ä¸€ä¸ªapiæ¥å£çš„å‡ºå£ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠapiæ¥å£æ ¹æ®åŠŸèƒ½åˆ’åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼Œåˆ©äºå¤šäººåä½œå¼€å‘ï¼Œæ¯”å¦‚ä¸€ä¸ªäººåªè´Ÿè´£ä¸€ä¸ªæ¨¡å—çš„å¼€å‘ç­‰ï¼Œè¿˜èƒ½æ–¹ä¾¿æ¯ä¸ªæ¨¡å—ä¸­æ¥å£çš„å‘½åå“¦ã€‚</p><p>â€‹        base.js:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * æ¥å£åŸŸåçš„ç®¡ç†</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">const</span> base = &#123;    </span><br><span class="line">   <span class="attr">sq</span>: <span class="string">&#x27;https://xxxx111111.com/api/v1&#x27;</span>,    </span><br><span class="line">   <span class="attr">bd</span>: <span class="string">&#x27;http://xxxxx22222.com/api&#x27;</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> base;</span><br></pre></td></tr></table></figure><p>â€‹    é€šè¿‡base.jsæ¥ç®¡ç†æˆ‘ä»¬çš„æ¥å£åŸŸåï¼Œä¸ç®¡æœ‰å¤šå°‘ä¸ªéƒ½å¯ä»¥é€šè¿‡è¿™é‡Œè¿›è¡Œæ¥å£çš„å®šä¹‰ã€‚å³ä½¿ä¿®æ”¹èµ·æ¥ï¼Œä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚</p><p>â€‹    æœ€åå°±æ˜¯æ¥å£æ¨¡å—çš„è¯´æ˜ï¼Œä¾‹å¦‚ä¸Šé¢çš„article.js:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * articleæ¨¡å—æ¥å£åˆ—è¡¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> base <span class="keyword">from</span> <span class="string">&#x27;./base&#x27;</span>; <span class="comment">// å¯¼å…¥æ¥å£åŸŸååˆ—è¡¨</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;@/utils/http&#x27;</span>; <span class="comment">// å¯¼å…¥httpä¸­åˆ›å»ºçš„axioså®ä¾‹</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span>; <span class="comment">// æ ¹æ®éœ€æ±‚æ˜¯å¦å¯¼å…¥qsæ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> article = &#123;    </span><br><span class="line">    <span class="comment">// æ–°é—»åˆ—è¡¨    </span></span><br><span class="line">    articleList () &#123;        </span><br><span class="line">        <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">`<span class="subst">$&#123;base.sq&#125;</span>/topics`</span>);    </span><br><span class="line">    &#125;,    </span><br><span class="line">    <span class="comment">// æ–°é—»è¯¦æƒ…,æ¼”ç¤º    </span></span><br><span class="line">    articleDetail (id, params) &#123;        </span><br><span class="line">        <span class="keyword">return</span> axios.<span class="title function_">get</span>(<span class="string">`<span class="subst">$&#123;base.sq&#125;</span>/topic/<span class="subst">$&#123;id&#125;</span>`</span>, &#123;            </span><br><span class="line">            <span class="attr">params</span>: params        </span><br><span class="line">        &#125;);    </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// postæäº¤    </span></span><br><span class="line">    login (params) &#123;        </span><br><span class="line">        <span class="keyword">return</span> axios.<span class="title function_">post</span>(<span class="string">`<span class="subst">$&#123;base.sq&#125;</span>/accesstoken`</span>, qs.<span class="title function_">stringify</span>(params));    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å…¶ä»–æ¥å£â€¦â€¦â€¦â€¦</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> article;</span><br></pre></td></tr></table></figure><p>â€‹        1.é€šè¿‡ç›´æ¥å¼•å…¥æˆ‘ä»¬å°è£…å¥½çš„axioså®ä¾‹ï¼Œç„¶åå®šä¹‰æ¥å£ã€è°ƒç”¨axioså®ä¾‹å¹¶è¿”å›ï¼Œå¯ä»¥æ›´çµæ´»çš„ä½¿ç”¨axiosï¼Œæ¯”å¦‚ä½ å¯ä»¥å¯¹postè¯·æ±‚æ—¶æäº¤çš„æ•°æ®è¿›è¡Œä¸€ä¸ªqsåºåˆ—åŒ–çš„å¤„ç†ç­‰ã€‚</p><p>â€‹        2.è¯·æ±‚çš„é…ç½®æ›´çµæ´»ï¼Œä½ å¯ä»¥é’ˆå¯¹æŸä¸ªéœ€æ±‚è¿›è¡Œä¸€ä¸ªä¸åŒçš„é…ç½®ã€‚å…³äºé…ç½®çš„ä¼˜å…ˆçº§ï¼Œaxiosæ–‡æ¡£è¯´çš„å¾ˆæ¸…æ¥šï¼Œè¿™ä¸ªé¡ºåºæ˜¯ï¼šåœ¨ lib/defaults.js æ‰¾åˆ°çš„åº“çš„é»˜è®¤å€¼ï¼Œç„¶åæ˜¯å®ä¾‹çš„ defaults å±æ€§ï¼Œæœ€åæ˜¯è¯·æ±‚çš„ config å‚æ•°ã€‚åè€…å°†ä¼˜å…ˆäºå‰è€…ã€‚</p><p>â€‹        3.restfulé£æ ¼çš„æ¥å£ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼çµæ´»çš„è®¾ç½®apiæ¥å£åœ°å€ã€‚</p><p>â€‹        æœ€åï¼Œä¸ºäº†æ–¹ä¾¿apiçš„è°ƒç”¨ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æŒ‚è½½åˆ°vueçš„åŸå‹ä¸Šã€‚åœ¨main.jsä¸­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span> <span class="comment">// å¯¼å…¥è·¯ç”±æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span> <span class="comment">// å¯¼å…¥vuexæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&#x27;./api&#x27;</span> <span class="comment">// å¯¼å…¥apiæ¥å£</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$api</span> = api; <span class="comment">// å°†apiæŒ‚è½½åˆ°vueçš„åŸå‹ä¸Š</span></span><br><span class="line">ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ä¸­è¿™æ ·è°ƒç”¨æ¥å£ï¼Œegï¼š</span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;    </span><br><span class="line">    <span class="title function_">onLoad</span>(<span class="params">id</span>) &#123;      </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$api</span>.<span class="property">article</span>.<span class="title function_">articleDetail</span>(id, &#123;        </span><br><span class="line">            <span class="attr">api</span>: <span class="number">123</span>      </span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// æ‰§è¡ŒæŸäº›æ“ä½œ      </span></span><br><span class="line">        &#125;)    </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å†æä¸€ä¸‹æ–­ç½‘çš„å¤„ç†ï¼Œè¿™é‡Œåªåšä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;  </span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;    </span><br><span class="line">        &lt;div v-if=&quot;!network&quot;&gt;      </span><br><span class="line">            &lt;h3&gt;æˆ‘æ²¡ç½‘äº†&lt;/h3&gt;      </span><br><span class="line">            &lt;div @click=&quot;onRefresh&quot;&gt;åˆ·æ–°&lt;/div&gt;      </span><br><span class="line">        &lt;/div&gt;    </span><br><span class="line">        &lt;router-view/&gt;      </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;  </span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,  </span><br><span class="line">        <span class="attr">computed</span>: &#123;    </span><br><span class="line">            ...<span class="title function_">mapState</span>([<span class="string">&#x27;network&#x27;</span>])  </span><br><span class="line">        &#125;,  </span><br><span class="line">        <span class="attr">methods</span>: &#123;    </span><br><span class="line">            <span class="comment">// é€šè¿‡è·³è½¬ä¸€ä¸ªç©ºé¡µé¢å†è¿”å›çš„æ–¹å¼æ¥å®ç°åˆ·æ–°å½“å‰é¡µé¢æ•°æ®çš„ç›®çš„</span></span><br><span class="line">            onRefresh () &#123;      </span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">replace</span>(<span class="string">&#x27;/refresh&#x27;</span>)    </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>â€‹    </p><p>â€‹        è¿™æ˜¯app.vueï¼Œè¿™é‡Œç®€å•æ¼”ç¤ºä¸€ä¸‹æ–­ç½‘ã€‚åœ¨http.jsä¸­ä»‹ç»äº†ï¼Œæˆ‘ä»¬ä¼šåœ¨æ–­ç½‘çš„æ—¶å€™ï¼Œæ¥æ›´æ–°vueä¸­networkçš„çŠ¶æ€ï¼Œé‚£ä¹ˆè¿™é‡Œæˆ‘ä»¬æ ¹æ®networkçš„çŠ¶æ€æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦åŠ è½½è¿™ä¸ªæ–­ç½‘ç»„ä»¶ã€‚æ–­ç½‘æƒ…å†µä¸‹ï¼ŒåŠ è½½æ–­ç½‘ç»„ä»¶ï¼Œä¸åŠ è½½å¯¹åº”é¡µé¢çš„ç»„ä»¶ã€‚å½“ç‚¹å‡»åˆ·æ–°çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šè¿‡è·³è½¬refeshé¡µé¢ç„¶åç«‹å³è¿”å›çš„æ–¹å¼æ¥å®ç°é‡æ–°è·å–æ•°æ®çš„æ“ä½œã€‚å› æ­¤æˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªrefresh.vueé¡µé¢ï¼Œå¹¶åœ¨å…¶beforeRouteEnteré’©å­ä¸­å†è¿”å›å½“å‰é¡µé¢ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// refresh.vue</span></span><br><span class="line">beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="title function_">next</span>(<span class="function"><span class="params">vm</span> =&gt;</span> &#123;            </span><br><span class="line">        vm.<span class="property">$router</span>.<span class="title function_">replace</span>(<span class="keyword">from</span>.<span class="property">fullPath</span>)        </span><br><span class="line">    &#125;)    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;axios-è¯¦ç»†å°è£…&quot;&gt;&lt;a href=&quot;#axios-è¯¦ç»†å°è£…&quot; class=&quot;headerlink&quot; title=&quot;axios è¯¦ç»†å°è£…&quot;&gt;&lt;/a&gt;axios è¯¦ç»†å°è£…&lt;/h1&gt;&lt;h2 id=&quot;ä¸€ã€axiosçš„å°è£…&quot;&gt;&lt;a href=&quot;#ä¸€ã€axiosçš„å°è£…&quot;</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://aliveseven.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="Vue" scheme="https://aliveseven.github.io/categories/%E5%89%8D%E7%AB%AF/Vue/"/>
    
    
    <category term="å‰ç«¯" scheme="https://aliveseven.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="axios" scheme="https://aliveseven.github.io/tags/axios/"/>
    
    <category term="Vue" scheme="https://aliveseven.github.io/tags/Vue/"/>
    
    <category term="JavaScript" scheme="https://aliveseven.github.io/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://aliveseven.github.io/posts/4a17b156/"/>
    <id>https://aliveseven.github.io/posts/4a17b156/</id>
    <published>2022-08-28T05:35:57.003Z</published>
    <updated>2022-08-30T06:48:39.014Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
    <category term="Hello" scheme="https://aliveseven.github.io/tags/Hello/"/>
    
  </entry>
  
</feed>
